webpackJsonp([1],{"+5Md":function(t,e){},"/IjA":function(t,e){},"1Bfr":function(t,e){},"3x3S":function(t,e){},"7Err":function(t,e){},"9DYq":function(t,e){},"9ub9":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAABuCAIAAAABCq4sAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5REQ5OTEwNzdFQTMxMUU4QkMyNEI3MEEwNTRFOEEyRiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5REQ5OTEwODdFQTMxMUU4QkMyNEI3MEEwNTRFOEEyRiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjlERDk5MTA1N0VBMzExRThCQzI0QjcwQTA1NEU4QTJGIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjlERDk5MTA2N0VBMzExRThCQzI0QjcwQTA1NEU4QTJGIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+7yZkGAAAAylJREFUeNrs2+tO2zAYgOE4h5YxoBwGY4hxGbumXXmPND2FUuI4nrOJiYHTIIpGa7+vED9QBFH61PmSULH342dAZCvkEBA4CBwEDgIHgYPAQeAgcBA4CBxE4CBwEDgIHAQOAgeBg8BB4CBwEIGDwEHgIHAQOAgcBA4CB4GDwEEEDgIHgYPAQeCgDy3mEKyvfHgos4WWMhCBaLWjg0ORJODwPq3laKgW8yc/yopJGp+cmi9weJ0c9NVd9lJMkY7N9/j0jJnD01SWWWQ8ZtYPnefg8BXHfLZ+g6JpA3A4PIeuGgaSpg3A4fI0uukG4HA1EScbbgAOZ4sODhoOXNMG4HAXR+dYRFHtUWtXd8PA4etpJYqSb1dWHyJpJZdXPhwEboLVv2/ae63vN0WallmmS/V7zoijw6P4+CQIQ3CwfsTJ+UVwfqGVCoQQoV8LrQc4tFbzWZnn1aBw1HnzWcbD94b7OP4+IjEnhvL+Pvl6yYrIQFpVTCdPH5GobFGMb3nVwRGUq1X1BPUll9mUF95rHOb6Qg561pvc8na05okruY9DDga6KNYMImZd4eX3EYc5d5TLu/WXMLLf1TJHgF84rKOGhYdSea9b3cAgT3CsGTUsG0spe10fHr6Do3nUsCwzD6u833vNZuVy6Rsjp26CNY8a1hd+eSdHw+o2ec10YvT8+bUijltX1/58NMGdleOVo4Y1NZ8ZWLXXNY/gzJqU97tBWYLD2VHDvuqMb1W2eC5jNHx2R0TnuRwOwOHyqGH/JcNBeb/8h4vtX8wNl2KSMnO4PGrYx4teNzo8MlOFUVJNoHV/MR2H7Xa4/xkczo4aVh/qdR9IMbNI6/rG7eF0t08rm48aG/zp0vnhdLdxvMuo8XYfrg+nO4yjmE3fZ9TYoGo4nU7BsXWpmjsT/303UnBs4cSht2MvNDi2LnPNyW5wKVuz62dfgjiuxo6Peu8KEX7arz7GAo5t3PvOcWC+iNMKgYPAQeAgcBA4CBxE4CBwEDgIHAQOAgeBg8BB4CBwEDiIwEHgIHAQOAgcBA4CB4GDwEHgIAIHgYPAQeAgcBA4CBwEDnKxXwIMAGgLgaHqem9fAAAAAElFTkSuQmCC"},C7PE:function(t,e){},IJfR:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("MVMM"),n=a("Xnwh"),s=a.n(n),o={data:function(){return{videoData:[],videoDataSelected:{},vlcShow:!1,vlcWidth:424}},methods:{dropDownItemSelect:function(t){var e=this,a=!1,i={};this.videoData.forEach(function(e){e.dev_name==t&&(i=e,a=!0)}),this.vlcShow=!1,this.videoDataSelected=i,a&&setTimeout(function(){e.vlcShow=!0,e.vlcWidth=425,setTimeout(function(){e.vlcShow=!0,e.vlcWidth=424},300)},100)},loadData:function(t){var e=this;this.$http("Ma_zong/playVideo",{dev_code:t}).then(function(t){var a=t.data;e.videoData=a;var i=a[0]||{};e.dropDownItemSelect(i.dev_name)})}},computed:{crossing_box:function(t){return this.$store.state.crossing_box_selected}},watch:{crossing_box:function(t){this.loadData(t.dev_code)}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("p",{staticClass:"box-info hightlight"},[t._v("视频通道")]),t._v(" "),t.videoData.length>0?a("div",{staticClass:"selectbox",staticStyle:{"z-index":"2"}},[a("Dropdown",{staticClass:"column-dropdown",attrs:{placement:"right-start"},on:{"on-click":t.dropDownItemSelect}},[a("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n        "+t._s(t.videoDataSelected.dev_name)+"\n        "),a("Icon",{attrs:{type:"arrow-down-b"}})],1),t._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},t._l(t.videoData,function(e,i){return a("DropdownItem",{key:i,attrs:{name:e.dev_name}},[t._v(t._s(e.dev_name))])}))],1)],1):t._e(),t._v(" "),a("div",{staticClass:"box-content"},[a("div",{staticClass:"box-content-title",staticStyle:{"z-index":"1"}},[t.vlcShow?a("object",{style:{width:t.vlcWidth+"px"},attrs:{type:"application/x-vlc-plugin",pluginspage:"http://www.videolan.org/",id:"vlc",events:"false",width:"424",height:"253"}},[a("param",{attrs:{name:"mrl",value:t.videoDataSelected.address}})]):t._e()]),t._v(" "),t.videoData.length?t._e():a("div",{staticClass:"tip"},[t._v("暂未数据")]),t._v(" "),t.videoData.length?a("Row",{staticClass:"box-content-body"},[a("i-col",{staticClass:"box-content-body-inner-left",attrs:{span:"8"}},[a("div",{staticClass:"origin-item",attrs:{title:t.videoDataSelected.name}},[t._v(t._s(t.videoDataSelected.name))])]),t._v(" "),a("i-col",{staticClass:"box-content-body-inner-right",attrs:{span:"16"}},[a("div",{staticClass:"box-content-body-inner-item",attrs:{title:t.videoDataSelected.sdk}},[t._v("设备厂家："+t._s(t.videoDataSelected.sdk))]),t._v(" "),a("div",{staticClass:"box-content-body-inner-item",attrs:{title:t.videoDataSelected.valid_time||0}},[t._v("生命周期："+t._s(t.videoDataSelected.valid_time||"0")+"年")]),t._v(" "),a("div",{staticClass:"box-content-body-inner-item",attrs:{title:t.videoDataSelected.brand+"-"+t.videoDataSelected.model}},[t._v("品牌型号："+t._s(t.videoDataSelected.brand)+"-"+t._s(t.videoDataSelected.model))]),t._v(" "),a("div",{staticClass:"box-content-body-inner-item",attrs:{title:t.videoDataSelected.build_company||"无"}},[t._v("建设单位："+t._s(t.videoDataSelected.build_company||"无"))])])],1):t._e()],1)])},staticRenderFns:[]};var c=a("vSla")(o,r,!1,function(t){a("j1mr"),a("xP/J")},"data-v-6d28fe1d",null).exports,l={props:{data:Array},data:function(){return{items:[]}},methods:{},created:function(){var t=this;setInterval(function(){if(t.items.length>0){var e=t.items[0];t.items.splice(0,1),t.items.push(e)}},5e3)},watch:{data:function(t){var e=this;this.items.length?t.forEach(function(t){e.items.forEach(function(e){e.category_num=e.category_num||{},t.category_num=t.category_num||{},e.category_num==t.category_num&&(e.count=t.count)})}):this.items=t}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"box-header hightlight"},[t._v("设备监视")]),t._v(" "),a("div",{staticClass:"box-body"},[a("div",{staticClass:"table"},[t._m(0),t._v(" "),a("div",{staticClass:"table-body"},[t.items.length>0?a("div",[a("transition-group",{attrs:{name:"list",tag:"div"}},t._l(t.items,function(e){return a("div",{key:e.category_num,staticClass:"list-item"},[a("div",{staticClass:"tr",class:"bg"+e.category_num},[a("div",{staticClass:"td"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"td"},[t._v(t._s(e.count))])])])}))],1):t._e()])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-header"},[e("div",{staticClass:"tr"},[e("div",{staticClass:"td"},[this._v("设备")]),this._v(" "),e("div",{staticClass:"td"},[this._v("统计")])])])}]};var u=a("vSla")(l,d,!1,function(t){a("aVd1")},"data-v-58e4c79e",null).exports,v={props:{data:Object},data:function(){return{sum:0,online:0}},methods:{animatedNumber:function(t,e,a){var i=this;if(t!=e)var n=Math.ceil((t-e)/30),s=setInterval(function(){e+=n,(n>0&&e>=t||n<0&&e<=t||0==n)&&(e=t,clearInterval(s)),i[a]=e},25)}},watch:{"data.sum":function(t){this.animatedNumber(t,this.sum,"sum")},"data.online":function(t){this.animatedNumber(t,this.online,"online")}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"box-header hightlight"},[t._v("运维节点")]),t._v(" "),a("div",{staticClass:"box-body"},[a("Row",{staticClass:"box-body-inner"},[a("i-col",{staticClass:"box-body-inner-item",attrs:{span:"12"}},[a("div",{staticClass:"box-body-inner-item-left"}),t._v(" "),a("div",{staticClass:"box-body-inner-item-right"},[a("div",{staticClass:"num"},[t._v(t._s(t.sum))]),t._v(" "),a("div",[t._v("总节点(个)")])])]),t._v(" "),a("i-col",{staticClass:"box-body-inner-item",attrs:{span:"12"}},[a("div",{staticClass:"box-body-inner-item-left"}),t._v(" "),a("div",{staticClass:"box-body-inner-item-right"},[a("div",{staticClass:"num"},[t._v(t._s(t.online))]),t._v(" "),a("div",[t._v("运行节点(个)")])])])],1)],1)])},staticRenderFns:[]};var m=a("vSla")(v,h,!1,function(t){a("tUy6")},"data-v-38e4e3ec",null).exports,g={props:{data:Object},data:function(){return{on_radio:0,off_radio:0}},methods:{animatedView:function(t,e,a,i){var n=this,s=i.getContext("2d"),o=i.width,r=i.height,c=(t-e)/30;c=c>0?Math.ceil(c):-Math.ceil(Math.abs(c));var l=function(){s.clearRect(0,0,o,r),s.lineWidth=2,s.beginPath(),s.strokeStyle="#08478f",s.rect(0,0,o,r),s.stroke(),s.beginPath();var t=e/100,a=s.createLinearGradient(0,0,o*t,r);a.addColorStop(0,"#08478f"),a.addColorStop(1,"#72d9f8"),s.fillStyle=a;for(var i=1===t?20:20*t,n=0;n<i;n++){var c=(o-4)/20-4,l=Math.floor(i);n<l?s.fillRect(4+(c+4)*n,4,c,r-8):s.fillRect(4+(c+4)*n,4,c*(i-l),r-8)}s.fill()};if(t==e)return l();var d=setInterval(function(){e+=c,e=parseFloat(e.toFixed(2)),(c>0&&e>=t||c<0&&e<=t||0==c)&&(e=t,clearInterval(d)),n[a]=e,l()},25)}},watch:{"data.on_radio":function(t){var e=this;this.$nextTick(function(){e.animatedView(t,e.on_radio,"on_radio",e.$refs.canvas_online)})},"data.off_radio":function(t){var e=this;this.$nextTick(function(){e.animatedView(t,e.off_radio,"off_radio",e.$refs.canvas_offline)})}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"box-inner"},[a("p",{staticClass:"box-inner-title"},[t._v("相机实时在线率")]),t._v(" "),a("div",{staticClass:"box-inner-body"},[a("canvas",{ref:"canvas_online",staticClass:"box-inner-body-canvas",attrs:{width:"380",height:"22"}}),t._v(" "),a("span",{staticClass:"box-inner-body-num"},[t._v(t._s(t.on_radio)+"%")])])]),t._v(" "),a("div",{staticClass:"box-inner"},[a("p",{staticClass:"box-inner-title"},[t._v("相机实时通断率")]),t._v(" "),a("div",{staticClass:"box-inner-body"},[a("canvas",{ref:"canvas_offline",staticClass:"box-inner-body-canvas",attrs:{width:"380",height:"22"}}),t._v(" "),a("span",{staticClass:"box-inner-body-num"},[t._v(t._s(t.off_radio)+"%")])])])])},staticRenderFns:[]};var _=a("vSla")(g,f,!1,function(t){a("9DYq")},"data-v-08d7e1ac",null).exports,p={data:function(){return{dateTime:"",menuList:[{name:"资产管理",class:"zcgl",title:"资产管理"},{name:"数据可视化",class:"sjksh",title:"数据可视化"},{name:"诊断",class:"zd",title:"综合诊断"},{name:"统计分析",class:"tjfx",title:"统计分析"}]}},methods:{getDateTime:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth(),i=t.getDate(),n=t.getHours(),s=t.getMinutes(),o=t.getSeconds();n=n<10?"0"+n:n,s=s<10?"0"+s:s,o=o<10?"0"+o:o,this.dateTime=e+"年"+(a+1)+"月"+i+"日 "+n+":"+s+":"+o},refreshDateTime:function(){var t=this;this.getDateTime(),setInterval(function(){t.getDateTime()},1e3)},linkTo:function(t){sessionStorage.setItem("jk_url",t.title),window.location.href=indexURL}},created:function(){this.refreshDateTime()}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("ul",{staticClass:"menu"},[a("li",{staticClass:"active"},[t._v("首页")]),t._v(" "),t._l(t.menuList,function(e,i){return a("li",{key:i,class:e.class,on:{click:function(a){t.linkTo(e)}}},[t._v("\n      "+t._s(e.name)+"\n    ")])})],2),t._v(" "),a("div",{staticClass:"datetime"},[t._v(t._s(t.dateTime))])])},staticRenderFns:[]};var C=a("vSla")(p,w,!1,function(t){a("+5Md")},"data-v-1be49ef5",null).exports,b=a("zsLt"),y=a.n(b),x=a("kfHR"),D=a.n(x),A=a("IHPB"),S=a.n(A),T={props:{data:Array},data:function(){return{allData:[],msgTip:!1,msgCrossing:!1,msgContent:!1,msgType:!1,msgLoading:!1,msgLoadingtitle:"",msgPlain:!1,msgPlainText:"",repairLoading:0,repairLoading_origin:0,nowShowData:{},relation:{message_type:{0:"机箱故障",1:"相机故障",2:"故障自动修复",3:"故障人工修复"},fault_type:{0:"视频正常",1:"视频打不开",2:"视频偏色",3:"视频遮挡",4:"视频冻结",5:"亮度异常",6:"用户名或密码错或设备RTSP服务异常",7:"设备未提供RTSP协议连结",8:"设备PING不通，网络故障",9:"提供的ID编号或url有误 ",50:"设备故障",52:"网络故障",54:"服务器离线",100:"供电故障",102:"网络连接故障",104:"光端机激光输出故障",106:"光端机电路故障",108:"机箱停电故障",110:"设备故障",112:"空开故障",114:"门禁检测"},level:{0:"未知",1:"提示",2:"警告",3:"次要",4:"重要",5:"严重"}}}},methods:{beginAnimateView:function(t){if(t.length){var e=t[0];e?2==e.message_type||3==e.message_type?this.repairAnimate():this.failureAnimate():this.plainAnnimate()}else{var a;if(this.allData.length)(a=this.data).push.apply(a,S()(this.allData)),this.featchData=[];else this.data.push(!1)}},failureAnimate:function(){var t=this;setTimeout(function(){t.msgTip=!t.msgTip,setTimeout(function(){t.nowShowData=t.data[0],t.msgTip=!t.msgTip,t.msgCrossing=!t.msgCrossing,setTimeout(function(){t.msgType=!t.msgType,setTimeout(function(){t.msgContent=!t.msgContent,setTimeout(function(){t.msgCrossing=!t.msgCrossing,t.msgType=!t.msgType,t.msgContent=!t.msgContent,setTimeout(function(){t.$store.commit("setMsgFailure",t.nowShowData),t.data.shift()},2600)},3500)},1e3)},1e3)},3700)},1e3)},repairAnimate:function(){var t=this;setTimeout(function(){t.nowShowData=t.data[0],t.msgLoadingtitle="正在自动修复中请稍后...",t.repairLoading=0,t.msgCrossing=!t.msgCrossing,setTimeout(function(){t.msgType=!t.msgType,setTimeout(function(){t.msgLoading=!t.msgLoading,t.repairLoading=Math.floor(50*Math.random()),setTimeout(function(){t.repairLoading=100,setTimeout(function(){t.msgLoadingtitle="修复成功",t.$store.commit("setMsgRequire",t.nowShowData),setTimeout(function(){t.msgCrossing=!t.msgCrossing,t.msgType=!t.msgType,t.msgLoading=!t.msgLoading,t.data.shift()},1500)},1300)},1500)},1e3)},1e3)},1e3)},plainAnnimate:function(){var t=this,e=Math.floor(3*Math.random());this.msgPlainText=["正在设备巡检...","正在视频检测...","正在巡检修复..."][e],setTimeout(function(){t.msgPlain=!t.msgPlain,setTimeout(function(){t.msgPlain=!t.msgPlain,setTimeout(function(){t.data.shift()},2e3)},6e3)},500)},loadingView:function(){var t=this,e=this.$refs.canvas_loading,a=e.width,i=e.height,n=e.getContext("2d"),s=a/2,o=i/2,r=i/2,c=Math.PI,l=this.repairLoading_origin,d=this.repairLoading,u=Math.ceil(d/30),v=function(){n.clearRect(0,0,a,i),n.beginPath(),n.lineWidth=2,n.strokeStyle="rgba(23, 136, 228, 0.5)",n.fillStyle="rgba(7, 43, 92, .3)",n.arc(s,o,r-1,0,2*c,!1),n.stroke(),n.fill(),n.save(),n.beginPath(),n.strokeStyle="#35e7fc",n.setLineDash([7]),n.lineWidth=12;var t=270-360*l/100;n.arc(s,o,r-12,270*c/180,t*c/180,!0),n.stroke(),n.beginPath(),n.strokeStyle="rgba(23, 136, 228, 0.2)",n.fillStyle="#0f2860",n.lineWidth=2,n.setLineDash([3]),n.arc(a/2,i/2,r-25,0,2*c,!1),n.stroke(),n.fill(),n.beginPath(),n.font="26px PingFang SC,Helvetica,Microsoft YaHei,Arial,sans-serif",n.textAlign="center",n.fillStyle="#fff",n.fillText(l+"%",s,o-3),n.beginPath(),n.fillStyle="#ccc",n.font="12px PingFang SC,Helvetica,Microsoft YaHei,Arial,sans-serif",n.fillText(l+" / 100",s,o+18),n.restore()};v();var h=setInterval(function(){(l+=u)>=d&&(l=d,clearInterval(h)),t.repairLoading_origin=l,v()},50)},loopFetchData:function(){var t=this;setInterval(function(){t.$http("Ma_zong/controlCenter").then(function(e){var a,i=e.data;i.length?(a=t.allData).push.apply(a,S()(i)):(t.allData.push(!1),t.allData=D()(new y.a(t.allData)))})},5e3)}},computed:{},watch:{data:function(t){this.beginAnimateView(t)},repairLoading:function(){this.loadingView()}},created:function(){var t=new RegExp("(^| )znyw_token=([^;]*)(;|$)");document.cookie.match(t)&&this.loopFetchData()}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"box-bg box-bg-left"}),t._v(" "),a("div",{staticClass:"box-bg box-bg-right"}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.msgTip,expression:"msgTip"}],staticClass:"msg-tip"},[t._v("警告！")]),t._v(" "),a("transition",{attrs:{name:"msg-crossing"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.msgCrossing,expression:"msgCrossing"}],staticClass:"msg-crossing"},[a("div",{staticClass:"info"},[t._v(t._s(t.nowShowData.crossing_name))])])]),t._v(" "),a("transition",{attrs:{name:"msg-content"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.msgContent,expression:"msgContent"}],staticClass:"msg-content"},[a("div",{staticClass:"title"},[t._v(t._s(t.nowShowData.memo))])])]),t._v(" "),a("transition",{attrs:{name:"msg-type"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.msgType,expression:"msgType"}],staticClass:"msg-type"},[a("div",{staticClass:"title"},[t._v(t._s(t.relation.message_type[t.nowShowData.message_type]))]),t._v(" "),a("div",{staticClass:"info"},[t._v("\n        等级：\n        "),a("span",[t._v(t._s(t.relation.level[t.nowShowData.level]))])]),t._v(" "),a("div",{staticClass:"info"},[t._v("\n        原因：\n        "),a("span",[t._v(t._s(t.relation.fault_type[t.nowShowData.fault_type]))])])])]),t._v(" "),a("transition",{attrs:{name:"msg-loading"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.msgLoading,expression:"msgLoading"}],staticClass:"msg-loading"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"view"},[a("canvas",{ref:"canvas_loading",attrs:{width:"140",height:"140"}})]),t._v(" "),a("div",{staticClass:"info"},[t._v("\n          "+t._s(t.msgLoadingtitle)+"\n        ")])])])]),t._v(" "),a("transition",{attrs:{name:"msg-plain"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.msgPlain,expression:"msgPlain"}],staticClass:"msg-plain"},[a("Icon",{staticClass:"rotateAnimate",style:{lineHeight:"85px",verticalAlign:"middle",marginRight:"10px"},attrs:{type:"load-a",size:40}}),t._v(" "),a("span",[t._v(t._s(t.msgPlainText))])],1)])],1)},staticRenderFns:[]};var M=a("vSla")(T,I,!1,function(t){a("1Bfr")},"data-v-4ce6be06",null).exports,E={props:{data:Array},data:function(){return{page:1,rows:5,showData:[],organize_show_selected:null,childData:[],child_loading:!1,child_total:0,child_page:1}},methods:{changePage:function(t){var e=this.page;this.page=e+t<=0?1:(e+t)*this.rows>=this.data.length?Math.ceil(this.data.length/this.rows):e+t,this.loadData()},childPageChange:function(t){this.child_page=t,this.loadChildData(this.organize_show_selected)},loadData:function(){var t=this;this.showData=[],this.data.forEach(function(e,a){a>=(t.page-1)*t.rows&&a<t.page*t.rows&&t.showData.push(e)})},loadChildData:function(t){var e=this;this.child_loading=!0,this.$http("Ma_zong/crossingBox",{o_id:t,page:this.child_page,rows:6}).then(function(t){var a=t.data;e.child_total=~~a.total,e.childData=a.list||[],e.child_loading=!1})},navMenuSelect:function(t){this.organize_show_selected=t.o_id,this.child_page=1,this.loadChildData(t.o_id)},navChildMenuSelect:function(t){this.$store.commit("setCrossingBox",t)}},computed:{pagePrevClassObject:function(){this.data.length;var t=this.page,e=(this.rows,!0);return t>1&&(e=!1),{"btn-disabled":e}},pageNextClassObject:function(){var t=this.data.length,e=this.page,a=this.rows,i=!0;return e<Math.ceil(t/a)&&(i=!1),{"btn-disabled":i}}},watch:{data:function(t){this.navMenuSelect(t[0]),this.loadData()}}},R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"box-header"},[a("div",{staticClass:"box-header-inner"},[a("Row",{staticClass:"box-header-inner-nav",attrs:{gutter:16}},t._l(t.childData,function(e,i){return a("i-col",{key:i,attrs:{span:"4"}},[a("div",{staticClass:"nav-item",attrs:{title:e.dev_name},on:{click:function(a){t.navChildMenuSelect(e)}}},[t._v(t._s(e.dev_name))])])})),t._v(" "),t.child_loading?a("Spin",{attrs:{fix:""}}):t._e(),t._v(" "),0==t.child_total?a("div",{staticClass:"tip"},[t._v("暂无数据")]):t._e(),t._v(" "),t.child_total>0?a("Page",{staticClass:"demo-page",style:{margin:"10px 0","text-align":"right","user-select":"none"},attrs:{total:t.child_total,size:"small","show-total":""},on:{"on-change":t.childPageChange}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"box-content"},[a("Row",[a("i-col",{attrs:{span:"22"}},t._l(t.showData,function(e,i){return a("div",{key:i,staticClass:"origin-item",class:{"origin-item-active":t.organize_show_selected==e.o_id},attrs:{title:e.name},on:{click:function(a){t.navMenuSelect(e)}}},[t._v(t._s(e.name))])})),t._v(" "),a("i-col",{attrs:{span:"2"}},[a("em",{staticClass:"prev",class:t.pagePrevClassObject,attrs:{title:"上一页"},on:{click:function(e){t.changePage(-1)}}},[a("Icon",{attrs:{type:"chevron-left",size:12}})],1),t._v(" "),a("em",{staticClass:"next",class:t.pageNextClassObject,attrs:{title:"下一页"},on:{click:function(e){t.changePage(1)}}},[a("Icon",{attrs:{type:"chevron-right",size:12}})],1)])],1)],1)])},staticRenderFns:[]};var k=a("vSla")(E,R,!1,function(t){a("/IjA"),a("QB6k")},"data-v-c3ffcc6c",null).exports,L={props:["data"],name:"failureChild",data:function(){return{dispatch:{0:"未派发",1:"已手动派发",2:"已自动派发"},defaultImg:'this.src="'+a("9ub9")+'"'}},created:function(){},computed:{levelClass:function(){var t={};return t[["g0","g1","g2","g3","g4","g5"][this.data.level]]=!0,t}}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"body"},[a("div",{staticClass:"info"},[a("div",{staticClass:"item"},[t._v("\n        "+t._s(t.data.crossing_name)+"\n        "),a("div",{staticClass:"msg"})]),t._v(" "),a("div",{staticClass:"item"},[t._v("\n        告警等级\n        "),a("div",{staticClass:"msg",class:t.levelClass})]),t._v(" "),a("div",{staticClass:"item"},[t._v("\n        故障时间\n        "),a("div",{staticClass:"msg ok time"},[t._v(t._s(t.data.create_time))])])])]),t._v(" "),a("div",{staticClass:"footer"},[t._v("\n    故障原因：\n    "),a("span",[t._v(t._s(t.data.memo))])])])},staticRenderFns:[]};var P={components:{YFailure:a("vSla")(L,N,!1,function(t){a("7Err")},"data-v-ed07de92",null).exports},props:{data:Array},name:"failure",data:function(){return{selectIndex:0,carouselItemCounts:0,carouselItemArray:{}}},created:function(){},computed:{msgFailure:function(){return this.$store.state.msgFailure}},watch:{data:function(t){var e=Math.ceil(t.length/3);this.carouselItemCounts=e;for(var a=0;a<e;a++)this.carouselItemArray[a+1]=t.length-3*a>3?3:t.length-3*a},msgFailure:function(t){this.data.unshift(t),this.data.length>9&&this.data.pop()}}},Y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"title hightlight"},[t._v("故障原因")]),t._v(" "),t.carouselItemCounts?t._e():a("div",{staticClass:"tip"},[t._v("暂无数据")]),t._v(" "),a("Carousel",{staticClass:"my-carousel",style:{width:"479px",height:"615px"},attrs:{"radius-dot":"",arrow:"never"},model:{value:t.selectIndex,callback:function(e){t.selectIndex=e},expression:"selectIndex"}},t._l(t.carouselItemCounts,function(e){return a("CarouselItem",{key:e,attrs:{name:e}},t._l(t.carouselItemArray[e],function(i){return a("YFailure",{key:i,attrs:{data:t.data[3*(e-1)+i-1]}})}))}))],1)},staticRenderFns:[]};var z=a("vSla")(P,Y,!1,function(t){a("q4CQ"),a("ogzW")},"data-v-33ce1082",null).exports,F={props:{data:Object},data:function(){return{show:!1,total:0,auto_radio:0,automatic:0,artificial:0}},methods:{view:function(){var t=this.$refs.view,e=t.getContext("2d"),a=t.width,i=t.height,n=2*a,s=-a,o=0,r=0,c=n/4;!function t(){e.clearRect(0,0,a,i),e.save(),e.beginPath(),e.arc(a/2,i/2,a/2-1,0,2*Math.PI,!1),e.lineWidth=1,e.strokeStyle="#1788e4",e.stroke(),e.clip();var l=i/2;-1*(o-=1)>=c&&(o=0),-1*(r-=.5)>=c&&(r=0),e.beginPath(),e.moveTo(s-r,l);for(var d=0;d<4;d++){var u=d*n/4+s-o;e.quadraticCurveTo(u+c/4,l+12,u+c/2,l),e.quadraticCurveTo(u+c/4+c/2,l-12,u+c,l)}e.lineTo(s+n,i),e.lineTo(s,i),e.fillStyle="#1662a8",e.fill(),e.beginPath(),e.moveTo(s-r,l);for(var v=0;v<8;v++){var h=v*n/4+s-r-30;e.quadraticCurveTo(h+c/4,l+12,h+c/2,l),e.quadraticCurveTo(h+c/4+c/2,l-12,h+c,l)}e.fillStyle="#1788e4",e.lineTo(s+n,i),e.lineTo(s,i),e.fill(),e.restore(),e.beginPath(),e.arc(a/2,i/2,a/2-2,0,2*Math.PI,!1),e.lineWidth=2,e.strokeStyle="#1788e4",e.stroke(),requestAnimationFrame(t)}()},animationNum:function(t,e,a){var i=this,n=Math.ceil(t/30);n=t<e?-n:n;var s=setInterval(function(){e+=n,(n>0&&e>=t||n<0&&e<=t||0==n)&&(e=t,clearInterval(s)),i[a]=e},50)}},created:function(){var t=this;this.$nextTick(function(){t.view()})},computed:{TOTAL:function(){return this.data.automatic+this.data.artificial},msgRequire:function(){return this.$store.state.msgRequire}},watch:{TOTAL:function(){this.animationNum(this.TOTAL,this.total,"total")},"data.artificial":function(t){this.animationNum(t,this.artificial,"artificial")},"data.auto_radio":function(t){this.animationNum(t,this.auto_radio,"auto_radio")},"data.automatic":function(t){this.animationNum(t,this.automatic,"automatic")},msgRequire:function(t){var e=this;t&&(this.show=!this.show,"2"==t.message_type&&this.automatic++,"3"==t.message_type&&this.artificial++,this.total++,setTimeout(function(){e.show=!e.show},2e3))}}},O={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"title"},[t._v("自动修复")]),t._v(" "),a("div",{staticClass:"box"},[a("div",{staticClass:"view"},[a("canvas",{ref:"view",attrs:{width:"160",height:"160"}}),t._v(" "),a("transition",{attrs:{name:"num-plus"}},[t.show?a("p",{staticClass:"add"},[t._v("+"+t._s(1))]):t._e()]),t._v(" "),a("div",{staticClass:"total"},[t._v(t._s(t.total))])],1),t._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"item header"},[a("div",[t._v("自动修复率")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.auto_radio)+"%")])]),t._v(" "),a("div",{staticClass:"item"},[a("div",[t._v("自动修复")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.automatic)+"个")])]),t._v(" "),a("div",{staticClass:"item"},[a("div",[t._v("人工修复")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.artificial)+"个")])])])])])},staticRenderFns:[]};var B=a("vSla")(F,O,!1,function(t){a("YqE8")},"data-v-0bd839b8",null).exports,G={components:{VueScrollbar:s.a,YVideoChannel:c,YDevs:u,YNodes:m,YOnOffLine:_,YMenus:C,YNews:M,YOrigin:k,YFailure:z,YRepair:B},data:function(){return{show:{header:!0,videoChannel:!0,devs:!0,nodes:!0,onOffLine:!0,menus:!0,news:!0,origin:!0,failure:!0,repair:!0},node_number:{},online_radio:{},count_assets:[],control_center:[],current_fault:[],fault_repair:{},organize_show:[]}},methods:{fetchAllData:function(){var t=this;this.$http("Ma_zong/indexAllData").then(function(e){if(e.status){var a=e.data;t.node_number=a.node_number,t.online_radio=a.online_radio,t.count_assets=a.count_assets,t.control_center=a.control_center,t.current_fault=a.current_fault,t.fault_repair=a.fault_repair,t.organize_show=a.organize_show}})},realtimeFetchData:function(){var t=this;setInterval(function(){t.$http("Ma_zong/nodeNumber").then(function(e){e.status&&(t.node_number=e.data)}),t.$http("Ma_zong/onlineRadio").then(function(e){e.status&&(t.online_radio=e.data)}),t.$http("Ma_zong/countAssets").then(function(e){e.status&&(t.count_assets=e.data)})},5e3)},transition:function(){var t=this;setTimeout(function(){t.show.header=!0,setTimeout(function(){t.show.videoChannel=!0,t.show.menus=!0,setTimeout(function(){t.show.devs=!0,setTimeout(function(){t.show.nodes=!0,setTimeout(function(){t.show.onOffLine=!0},50)},50)},50)},100)},50)}},created:function(){var t=new RegExp("(^| )znyw_token=([^;]*)(;|$)");document.cookie.match(t)?(this.fetchAllData(),this.realtimeFetchData()):window.location.href=loginURL}},j={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vue-scrollbar",{style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0"}},[a("div",{staticClass:"layout"},[a("transition",{attrs:{name:"fadeInTop"}},[t.show.header?a("div",{staticClass:"layout-header"},[a("div",{staticClass:"layout-header-logo"})]):t._e()]),t._v(" "),a("div",{staticClass:"layout-body"},[a("div",{staticClass:"layout-body-inner layout-body-inner-left"},[a("transition",{attrs:{name:"fadeInLeft"}},[t.show.videoChannel?a("YVideoChannel"):t._e()],1),t._v(" "),a("transition",{attrs:{name:"fadeInLeft"}},[t.show.devs?a("YDevs",{attrs:{data:t.count_assets}}):t._e()],1),t._v(" "),a("transition",{attrs:{name:"fadeInLeft"}},[t.show.nodes?a("YNodes",{attrs:{data:t.node_number}}):t._e()],1),t._v(" "),a("transition",{attrs:{name:"fadeInLeft"}},[t.show.onOffLine?a("YOnOffLine",{attrs:{data:t.online_radio}}):t._e()],1)],1),t._v(" "),a("div",{staticClass:"layout-body-inner layout-body-inner-content"},[a("transition",{attrs:{name:"fade"}},[t.show.menus?a("YMenus"):t._e()],1),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.show.news?a("YNews",{attrs:{data:t.control_center}}):t._e()],1),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.show.origin?a("YOrigin",{attrs:{data:t.organize_show}}):t._e()],1)],1),t._v(" "),a("div",{staticClass:"layout-body-inner layout-body-inner-right"},[a("transition",{attrs:{name:"fadeInRight"}},[t.show.failure?a("YFailure",{attrs:{data:t.current_fault}}):t._e()],1),t._v(" "),a("transition",{attrs:{name:"fadeInRight"}},[t.show.repair?a("YRepair",{attrs:{data:t.fault_repair}}):t._e()],1)],1)])],1)])},staticRenderFns:[]};var V={name:"App",components:{IndexPage:a("vSla")(G,j,!1,function(t){a("3x3S")},"data-v-7b79399a",null).exports},methods:{IEVersion:function(){var t=navigator.userAgent,e=t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1,a=t.indexOf("Edge")>-1&&!e,i=t.indexOf("Trident")>-1&&t.indexOf("rv:11.0")>-1;if(e){new RegExp("MSIE (\\d+\\.\\d+);").test(t);var n=parseFloat(RegExp.$1);return 7==n?7:8==n?8:9==n?9:10==n?10:6}return a?"edge":i?11:-1},isInsalledIEVLC:function(){var t=!1;try{null!=new ActiveXObject("VideoLAN.Vlcplugin.1")&&(t=!0)}catch(e){t=!1}return t}},beforeCreate:function(){this.$Loading.start()},created:function(){this.IEVersion();this.$Message.info({content:"若视频无法播放，请检测VLC插件是否安装",duration:8})},mounted:function(){this.$Loading.finish()}},H={render:function(){var t=this.$createElement;return(this._self._c||t)("IndexPage")},staticRenderFns:[]};var W=a("vSla")(V,H,!1,function(t){a("IJfR")},null,null).exports,J=a("OFNa"),Z=a.n(J),Q=a("9rMa");i.default.use(Q.a);var X=new Q.a.Store({state:{msgFailure:{},msgRequire:{},organize_show_selected:{},crossing_box_selected:[]},mutations:{setMsgFailure:function(t,e){t.msgFailure=e},setMsgRequire:function(t,e){t.msgRequire=e},setOriganizeShow:function(t,e){t.organize_show_selected=e},setCrossingBox:function(t,e){t.crossing_box_selected=e}},actions:{}}),$=a("bd9b"),U=a.n($),q=a("aA9S"),K=a.n(q),tt=a("rVsN"),et=a.n(tt),at=a("aozt"),it=a.n(at);it.a.defaults.baseURL="../",it.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var nt=function(t,e){return new et.a(function(a,i){it()({method:"post",url:t,data:K()(e||{})}).then(function(t){a(t.data)}).catch(function(t){if(t.response){var e=t.response.status;iView.Notice.error({title:"服务器提示",desc:"<h3>"+e+"</h3>",duration:10})}i(t)})})};i.default.prototype.$http=nt;var st=a("cLQA"),ot=a.n(st),rt=ot.a.Random;ot.a.mock("/api/Ma_zong/nodeNumber",/post|get/i,{data:function(){return ot.a.mock({sum:"@integer(0, 99999)",online:"@integer(0, 99999)"})},status:"1"});ot.a.mock("/api/Ma_zong/onlineRadio",/post|get/i,{data:function(){var t=rt.float(0,100,0,2);return ot.a.mock({on_radio:t,off_radio:parseFloat((100-t).toFixed(2))})},status:"1"});ot.a.mock("/api/Ma_zong/countAssets",/post|get/i,{data:function(){return ot.a.mock({data:[{category_num:"1",count:"@integer(0, 99999)",name:"视频设备"},{category_num:"2",count:"@integer(0, 99999)",name:"服务器"},{category_num:"3",count:"@integer(0, 99999)",name:"动环设备"},{category_num:"4",count:"@integer(0, 99999)",name:"机箱设备"},{category_num:"5",count:"@integer(0, 99999)",name:"网络设备"}]}).data},status:"1"});ot.a.mock("/api/Ma_zong/controlCenter",/post|get/i,{data:function(){return ot.a.mock({data:[{"id|+1":0,message_type:"1","fault_type|1":[0,1,2,3,4,5,6,7,8,9,50,52,54,100,102,104,106,108,110,112,114],memo:"@csentence(5, 10)",level:"@integer(0, 5)",crossing_name:"@csentence(5, 10)",create_time:"@datetime"}]}).data},status:"1"});ot.a.mock({online_radio:"online_radio",node_number:"node_number",count_assets:"count_assets",organize_show:"organize_show","crossing_box|5":["crossing_box"],play_video:["play_video"],fault_repair:"fault_repair","current_fault|4":["current_fault"],"control_center|3":["control_center"]}),a("SMjw"),a("C7PE"),a("eDDz");U.a.polyfill(),i.default.config.productionTip=!1,i.default.use(Z.a),new i.default({el:"#app",store:X,components:{App:W},template:"<App/>"})},QB6k:function(t,e){},SMjw:function(t,e){},YqE8:function(t,e){},aVd1:function(t,e){},eDDz:function(t,e){},j1mr:function(t,e){},ogzW:function(t,e){},q4CQ:function(t,e){},tUy6:function(t,e){},"xP/J":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.190952466e390e0a63aa.js.map